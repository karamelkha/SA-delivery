# Order Statuses — Delivery

Документ описывает статусы заказа в информационной системе сервиса доставки еды «Delivery».

Статусы отражают полный жизненный цикл заказа с точки зрения клиента — от оформления и оплаты до доставки или завершения обработки заказа.

Статусы используются в Functional Requirements и Use Case и являются частью доменной модели системы.

---

## 1. Статусы заказа

### 1.1 Перечень статусов заказа

- **Ожидает оплаты**
- **Заказ не оплачен**
- **Оплачен**
- **Подтверждён рестораном**
- **Отклонён**
- **Готов к доставке**
- **В пути**
- **Доставлен**
- **Ожидает назначения курьера**
- **Курьер не назначен**
- **Отменён**

---

### 1.2 Описание статусов заказа

- **Ожидает оплаты** — заказ создан после оформления клиентом и ожидает оплату.  
  Для данного статуса действует лимит времени на оплату — 15 минут.

- **Заказ не оплачен** — оплата заказа не была выполнена в установленный лимит времени.  
  Заказ закрыт для оплаты и дальнейшей обработки.

- **Оплачен** — оплата заказа успешно получена. Заказ передан ресторану для обработки.

- **Подтверждён рестораном** — ресторан подтвердил возможность выполнения заказа.

- **Отклонён** — ресторан отклонил заказ после получения оплаченного заказа.

- **Готов к доставке** — заказ приготовлен рестораном и готов к передаче курьеру.

- **Ожидает назначения курьера** — система выполняет процесс назначения курьера для доставки заказа, но курьер ещё не назначен.

- **Курьер не назначен** — курьер не был назначен в течение установленного времени назначения.  
  Заказ требует дальнейшего решения администратора.

- **В пути** — курьер принял заказ у ресторана и осуществляет доставку заказа клиенту.  
  Статус охватывает период от момента получения заказа курьером до момента завершения доставки.

- **Доставлен** — заказ успешно доставлен клиенту.

- **Отменён** — заказ отменён по решению администратора в соответствии с бизнес-правилами системы.

---

### 1.3 Допустимые переходы статусов заказа

- **Ожидает оплаты → Оплачен**
- **Ожидает оплаты → Заказ не оплачен** (по истечении 15 минут)
- **Оплачен → Подтверждён рестораном**
- **Оплачен → Отклонён**
- **Подтверждён рестораном → Готов к доставке**
- **Готов к доставке → Ожидает назначения курьера**
- **Ожидает назначения курьера → В пути**
- **Ожидает назначения курьера → Курьер не назначен**
- **В пути → Доставлен**
- **Курьер не назначен → Отменён** (по решению администратора)
- **Отклонён → (дальнейшая обработка оплаты выполняется в рамках отдельного процесса)**
- **Отменён → (дальнейшая обработка оплаты выполняется в рамках отдельного процесса)**

---

## 2. События, связанные с заказом (не являются статусами)

- **Доставка не выполнена** — событие, фиксируемое курьером в случае невозможности завершить доставку заказа.  
  Событие сопровождается указанием причины из доступного списка и используется для дальнейшей обработки заказа администратором.
