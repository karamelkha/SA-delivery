# Functional Requirements

## 1. Общие положения

Настоящий документ содержит функциональные требования к информационной системе сервиса доставки еды «Delivery».

Функциональные требования описывают функции и поведение системы в рамках определённой области охвата и не включают описание пользовательских интерфейсов, нефункциональные требования и детальные сценарии взаимодействия, которые вынесены в отдельные артефакты.

Статусы заказа и допустимые переходы описаны в документе `Order_Statuses.md`.
Бизнес-правила описаны в документе `Business_Rules.md`.

---

## 2. Роли пользователей

В системе предусмотрены следующие роли:

- **Клиент** — пользователь, оформляющий и оплачивающий заказ
- **Курьер** — пользователь, осуществляющий доставку заказа
- **Ресторан** — участник системы, принимающий и готовящий заказ
- **Администратор** — пользователь, управляющий системой

В системе также используется внешняя система:

- **Платёжный сервис** — внешний сервис для обработки онлайн-оплаты заказов

---

## 3. Функциональные требования

### 3.1 Работа с ресторанами и меню

FR-1. Система должна предоставлять клиенту возможность просматривать список доступных ресторанов.

FR-2. Система должна предоставлять клиенту возможность просматривать меню выбранного ресторана.

---

### 3.2 Оформление заказа клиентом

FR-3. Система должна позволять клиенту добавлять блюда в корзину.

FR-4. Система должна позволять клиенту изменять состав корзины до оформления заказа.

FR-5. Система должна рассчитывать итоговую стоимость корзины.

FR-6. Система должна создавать заказ при инициировании клиентом оформления заказа.

FR-7. Система должна присваивать созданному заказу уникальный идентификатор.

FR-8. Система должна переводить заказ в статус «Ожидает оплаты» после его создания.

---

### 3.3 Онлайн-оплата заказа

FR-9. Система должна предоставлять клиенту возможность инициировать онлайн-оплату заказа.

FR-10. Система должна передавать в платёжный сервис данные, необходимые для выполнения оплаты заказа.

FR-11. Система должна получать от платёжного сервиса результат оплаты заказа (успешно / неуспешно).

FR-12. Система должна сохранять статус оплаты заказа.

FR-13. Система должна ожидать оплату заказа не более 15 минут с момента перевода заказа в статус «Ожидает оплаты».

FR-14. При успешной оплате система должна переводить заказ в статус «Оплачен».

FR-15. При истечении времени ожидания оплаты система должна переводить заказ в статус «Заказ не оплачен».

FR-16. При неуспешной оплате система должна сохранять статус оплаты «Оплата не прошла» и оставлять заказ в статусе «Ожидает оплаты» до истечения времени ожидания оплаты.

FR-17. Система должна передавать оплаченный заказ в ресторан.

---

### 3.4 Обработка заказа рестораном

FR-18. Система должна предоставлять ресторану информацию об оплаченных заказах.

FR-19. Система должна принимать от ресторана решение о подтверждении или отклонении заказа.

FR-20. При подтверждении заказа система должна переводить заказ в статус «Подтверждён рестораном».

FR-21. При отклонении заказа система должна переводить заказ в статус «Отклонён».

FR-22. После завершения приготовления заказа система должна переводить заказ в статус «Готов к доставке».

---

### 3.5 Назначение курьера и доставка

FR-23. Система должна выполнять автоматическое назначение курьера на заказ в статусе «Готов к доставке».

FR-24. Система должна предоставлять курьеру информацию о назначенном заказе и адресе доставки.

FR-25. При назначении курьера система должна переводить заказ в статус «В пути».

FR-26. Система должна позволять курьеру переводить заказ в статус «Доставлен».

FR-27. Система должна сохранять изменения статусов заказа и историю изменений.

FR-28. При невозможности доставки система должна сохранять событие «Доставка не выполнена» с указанием причины.

---

### 3.6 Обработка исключительных ситуаций доставки

FR-29. Если курьер не назначен в течение установленного времени, система должна переводить заказ в статус «Курьер не назначен».

FR-30. В случае статуса «Курьер не назначен» система должна уведомлять администратора.

FR-31. Система должна предоставлять администратору возможность назначить курьера вручную.

FR-32. Система должна предоставлять администратору возможность отменить заказ.

---

### 3.7 Информирование пользователей

FR-33. Система должна предоставлять клиенту возможность просматривать текущий статус заказа.

FR-34. Система должна отображать клиенту изменения статуса заказа.

FR-35. Система должна отображать администратору и курьеру актуальный статус заказа.

---

### 3.8 Администрирование

FR-36. Система должна предоставлять администратору доступ к информации о заказах.

FR-37. Система должна предоставлять администратору возможность просматривать историю изменений заказов.

FR-38. Система должна предоставлять администратору возможность управления пользователями системы.

---

## 4. Ограничения

- Возвраты и частичные возвраты платежей находятся вне рамок проекта.
- Система не выполняет расчёт маршрутов доставки.
- Детальная проработка пользовательских интерфейсов не входит в рамки проекта.
