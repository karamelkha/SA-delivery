# 02 — Process Modeling

Данная папка содержит процессные модели BPMN, описывающие жизненный цикл заказа в информационной системе сервиса доставки еды «Delivery».

Процессные модели используются для формализации бизнес-логики обработки заказа и взаимодействия между участниками процесса: Клиентом, Системой Delivery, Рестораном, Курьером и внешними сервисами.

BPMN-диаграммы отражают поведение системы и правила обработки заказов, зафиксированные в требованиях и Use Case.

---

Процессы описывают **что происходит** в системе и **кто за что отвечает**, без привязки к технической реализации.

---

## 1. Структура папки

В папке представлены следующие BPMN-диаграммы:

| Файл                              | Назначение                                                         |
| --------------------------------- | ------------------------------------------------------------------ |
| `Order_Lifecycle_Main.bpmn`       | Сквозной процесс жизненного цикла заказа от оформления до доставки |
| `Payment_Process.bpmn`            | Подпроцесс онлайн-оплаты заказа                                    |
| `Courier_Assignment_Process.bpmn` | Подпроцесс назначения курьера                                      |
| `Order_Lifecycle_Exceptions.bpmn` | Обработка отклонений и нештатных ситуаций                          |

---

## 2. Архитектура процессов

В проекте используется многоуровневая модель процессов.

### 2.1 Сквозной процесс

`Order_Lifecycle_Main` описывает основной жизненный цикл заказа:

- оформление и оплата;
- передача заказа ресторану;
- приготовление заказа;
- назначение курьера;
- доставка;
- завершение заказа.

В сквозном процессе отражены только ключевые бизнес-шаги. Сложная логика вынесена в подпроцессы.

https://modeler.camunda.io/share/9d2f847a-e9d8-4cb6-86a5-50b1e97d380f - order_lifecycle_main

---

### 2.2 Подпроцессы

Для детализации отдельных этапов используются отдельные BPMN-процессы.

#### `Payment_Process`

Описывает:

- взаимодействие с платёжным сервисом;
- ожидание оплаты;
- обработку успешной и неуспешной оплаты;
- таймер ожидания оплаты.

https://modeler.camunda.io/share/f4a02d18-4519-4a6f-89de-6e4b451786f2 - payment_process

#### `Courier_Assignment_Process`

Описывает:

- поиск и назначение курьера;
- повторные попытки назначения;
- эскалацию при отсутствии доступных курьеров.

https://modeler.camunda.io/share/bbd757bd-b13e-4f03-8913-e4940ce022ba - courier_assignment_process

---

### 2.3 Обработка исключений

Нештатные ситуации (например, отсутствие курьера или невозможность доставки) моделируются с использованием:

- событий эскалации (Escalation Events);
- граничных событий (Boundary Events);
- отдельного процесса `Order_Lifecycle_Exceptions`.

Это позволяет изолировать обработку отклонений от основного happy-path и обеспечить управляемую реакцию системы.

---

## 3. Моделирование внешних систем

Внешние системы (например, платёжный сервис) представлены в BPMN как **Black Box Participants**.

Взаимодействие с ними осуществляется через **Message Flow**, что позволяет:

- не моделировать внутреннюю логику внешних сервисов;
- фиксировать точки интеграции и обмена данными.

---

## 4. Связь с требованиями

Процессные модели соответствуют следующим артефактам:

- Functional Requirements
- Use Cases
- Business Rules
- Order_Statuses

Каждый шаг процесса, изменение статуса, таймер и эскалация отражают требования и правила, описанные в соответствующих документах.

Процессные модели служат проверкой целостности и непротиворечивости всей системы требований.
